(this["webpackJsonpsimple-data-app"]=this["webpackJsonpsimple-data-app"]||[]).push([[0],{164:function(e,n,t){},165:function(e,n,t){},166:function(e){e.exports=JSON.parse('{"relays":{"0":{"mode":"auto","onSetpoint":">","setpoint":"80","sensorChannel":"0"},"1":{"mode":"off","onSetpoint":">","setpoint":"80","sensorChannel":"0"},"2":{"mode":"off","onSetpoint":">","setpoint":"80","sensorChannel":"0"},"3":{"mode":"off","onSetpoint":">","setpoint":"80","sensorChannel":"0"},"4":{"mode":"off","onSetpoint":">","setpoint":"80","sensorChannel":"0"}},"sensors":{"0":{"isEnabled":true,"name":"sensor0"},"1":{"isEnabled":true,"name":"sensor1"},"2":{"isEnabled":true,"name":"sensor2"},"3":{"isEnabled":true,"name":"sensor3"},"4":{"isEnabled":true,"name":"sensor4"},"5":{"isEnabled":true,"name":"sensor5"},"6":{"isEnabled":true,"name":"sensor6"},"7":{"isEnabled":true,"name":"sensor7"}}}')},179:function(e,n){},181:function(e,n){},211:function(e,n){},225:function(e,n){},227:function(e,n){},255:function(e,n){},257:function(e,n){},258:function(e,n){},263:function(e,n){},265:function(e,n){},284:function(e,n){},296:function(e,n){},299:function(e,n){},370:function(e,n,t){"use strict";t.r(n);var s=t(4),a=t(0),o=t.n(a),c=t(158),i=t.n(c),r=(t(164),t(165),t(15)),l=t(47),j=t(373),b=t(372),u=(t(166),t(167)),d=!1,h={sensors:{},relays:{}},m=function(){d||0===Object.keys(h.sensors).length||0===Object.keys(h.relays).length||(d=!0,setTimeout((function(){console.log("batch sending"),u.fetch.postJSON("/update-data",h,(function(e,n){})),d=!1}),3e3))};var O=function(){var e=Object(a.useState)(null),n=Object(l.a)(e,2),t=n[0],c=n[1],i=Object(a.useState)(null),d=Object(l.a)(i,2),O=d[0],p=d[1];Object(a.useEffect)((function(){u.fetch.getJSON("/get-data",(function(e,n){e||(c(n.relays),p(n.sensors))}))}),[]);var f=function(e,n){h.sensors[n]=e,m()},x=function(e,n){h.relays[n]=e,m()},v=function(e){var n=Object(a.useState)({name:e.name,isEnabled:e.isEnabled}),t=Object(l.a)(n,2),c=t[0],i=t[1];Object(a.useEffect)((function(){e.sensorLiftState(c,e.id)}));var b=function(e){var n="checkbox"===e.target.type?e.target.checked:e.target.value;"checkbox"===e.target.type?i(Object(r.a)(Object(r.a)({},c),{},{isEnabled:n})):i(Object(r.a)(Object(r.a)({},c),{},{name:n}))};return Object(s.jsx)(o.a.Fragment,{children:Object(s.jsxs)("div",{className:"singleSensor",children:[Object(s.jsxs)("p",{style:{display:"inline"},className:"h4",children:["Sensor Channel ",e.id]}),"Channel Name: ",Object(s.jsx)("input",{className:"form-control",type:"text",onChange:b,value:c.name}),Object(s.jsx)(j.a.Check,{checked:c.isEnabled,onChange:b,style:{display:"inline"},type:"checkbox",id:"isEnabled"+e.id,label:"Enabled"}),Object(s.jsx)("br",{})]})})},y=function(e){var n=Object(a.useState)({name:e.name,mode:e.mode,onSetpoint:e.onSetpoint,setpoint:e.setpoint,sensorChannel:e.sensorChannel}),t=Object(l.a)(n,2),c=t[0],i=t[1];Object(a.useEffect)((function(){e.relayLiftState(c,e.id)}));var b=function(e){var n=e.target.value;if("select-one"===e.target.type)switch(e.target.name){case"assocSensor":i(Object(r.a)(Object(r.a)({},c),{},{sensorChannel:n}));break;case"operator":i(Object(r.a)(Object(r.a)({},c),{},{onSetpoint:n}));break;case"mode":i(Object(r.a)(Object(r.a)({},c),{},{mode:n}))}else switch(e.target.name){case"name":i(Object(r.a)(Object(r.a)({},c),{},{name:n}));break;case"setpoint":i(Object(r.a)(Object(r.a)({},c),{},{setpoint:n}))}};return Object(s.jsx)(o.a.Fragment,{children:Object(s.jsxs)("div",{className:"singleRelay",children:[Object(s.jsxs)("p",{style:{display:"inline"},className:"h4",children:["Relay Channel ",e.id]}),Object(s.jsxs)(j.a.Label,{children:["Channel Name:",Object(s.jsx)("input",{className:"form-control",type:"text",name:"name",value:c.name,onChange:b})]}),"Mode:",Object(s.jsxs)("select",{className:"form-control",value:c.mode,name:"mode",onChange:b,children:[Object(s.jsx)("option",{value:"auto",children:"Auto"}),Object(s.jsx)("option",{value:"on",children:"On"}),Object(s.jsx)("option",{value:"off",children:"Off"})]}),"Positive value if the value of sensor",Object(s.jsx)("select",{className:"form-control",value:c.sensorChannel,name:"assocSensor",onChange:b,children:Object.keys(e.sensorChannels).map((function(n){return Object(s.jsx)("option",{value:n,children:"(".concat(n,") ")+e.sensorChannels[n].name},n)}))}),Object(s.jsxs)(j.a.Label,{children:["Is",Object(s.jsxs)(j.a.Control,{value:c.onSetpoint,as:"select",name:"operator",onChange:b,children:[Object(s.jsxs)("option",{value:">",children:[" ",">"," "]}),Object(s.jsxs)("option",{value:"<",children:[" ","<"," "]})]})]}),"than",Object(s.jsx)("input",{className:"form-control",name:"setpoint",type:"number",placeholder:"value",value:c.setpoint,onChange:b}),Object(s.jsx)("br",{})]})})};return null===t||null===O?Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(b.a,{animation:"border",variant:"success"})}):Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)("h1",{children:"Kombucha Control"}),Object(s.jsx)("h4",{children:"brew-01"}),Object(s.jsx)("h2",{children:"Relay Controls"}),Object(s.jsx)("div",{className:"relays-container",children:Object.keys(t).map((function(e,n){return Object(s.jsx)(y,{id:e,name:t[e].name,mode:t[e].mode,onSetpoint:t[e].onSetpoint,setpoint:t[e].setpoint,sensorChannel:t[e].sensorChannel,sensorChannels:O,relayLiftState:x},"relay_"+e)}))}),Object(s.jsx)("h2",{children:"Sensor Controls"}),Object(s.jsx)("div",{className:"sensors-container",children:Object.keys(O).map((function(e,n){return Object(s.jsx)(v,{name:O[e].name,isEnabled:O[e].isEnabled,id:e,sensorLiftState:f},"sens_"+e)}))})]})};t(369);i.a.render(Object(s.jsx)(o.a.StrictMode,{children:Object(s.jsx)(O,{})}),document.getElementById("root"))}},[[370,1,2]]]);
//# sourceMappingURL=main.c2bcdb25.chunk.js.map